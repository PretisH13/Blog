
<div class="container">
  <div>
    <h3>Latest articles added</h3>

    {% for article in page_obj %}
      <div class="blog-post">
        <article class="blog-post">
          <h2>{{ article.title }}</h2>
          <p class="blog-post-meta">{{ article.published }} <a href="#">Admin</a></p>
          {% if article.img %} 
            <img src="{{ article.img.url }}" alt="{{ article.title }}" class="article-image">
          {% endif %}
          <p>{{ article.body }}</p>

          <!-- Like/Dislike -->
          <p class="article-likes">
            Likes: <span id="likes-count-{{ article.slug }}">{{ article.total_likes }}</span>
            {% if user.is_authenticated %}
              <button class="like-button" data-slug="{{ article.slug }}">Like</button>
            {% endif %}
          </p>
          <p class="article-dislikes">
            Dislikes: <span id="dislikes-count-{{ article.slug }}">{{ article.total_dislikes }}</span>
            {% if user.is_authenticated %}
              <button class="dislike-button" data-slug="{{ article.slug }}">Dislike</button>
            {% endif %}
          </p>

          <!-- Comments -->
          <h4>Comments</h4>
          <div class="comments-section" data-article-slug="{{ article.slug }}">
            {% for comment in article.comments.all %}
              <div class="comment">
                <p><span>{{ comment.author }}</span> ({{ comment.created|date }}): {{ comment.body }}</p>
              </div>
            {% empty %}
              <p>No comments yet.</p>
            {% endfor %}
          </div>

          <!-- Add Comment -->
          {% if user.is_authenticated %}
            <form method="post" action="{% url 'articles:add-comment' article.slug %}" class="comment-form">
              {% csrf_token %}
              <textarea name="body" rows="2" placeholder="Add a comment..."></textarea>
              <button type="submit">Post Comment</button>
            </form>
          {% else %}
            <p><a href="{% url 'login' %}">Log in</a> to add a comment.</p>
          {% endif %}
        </article>
      </div>
      <hr class="separator">
    {% endfor %}

    {% block pagination %}
      {% include "landingpage/partials/_paginations.html" with page=page_obj %}
    {% endblock %}
  </div>
</div>